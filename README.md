# PRD（PoC版） – 鼻歌 → MIDI変換アプリ

## 1. 目的・背景
- 作曲初心者やボーカリストが、思いついたメロディを即座に形にできるようにする。
- 鼻歌をアプリ内で録音し、自動でMIDIファイルに変換してDAWで利用可能にする。
- OSやDAWに依存せず、クロスプラットフォームで提供。

---

## 2. ターゲットユーザー
- 楽譜が読めない or MIDI打ち込みが苦手な音楽制作者
- DAWユーザー（GarageBand, Logic, FL Studio, Ableton など）
- ボーカリスト、シンガーソングライター、趣味層〜セミプロ

---

## 3. ユーザー課題
- 頭の中のメロディをすぐに形にできない
- DAWでのメロディ打ち込みが面倒
- 録音ファイルからMIDI変換までの作業が複雑

---

## 4. 提供価値
- **鼻歌 → MIDI変換**のワンステップ化
- OS・DAWに依存せず動作
- メロディの種を逃さずキャッチできる

---

## 5. 想定ユーザーフロー
1. アプリ起動
2. 録音開始ボタンを押す
3. マイク権限確認（OS依存）
4. 録音停止
5. tempディレクトリにWAV保存
6. WAV → MIDI変換
7. MIDI保存先をユーザーが指定
8. tempディレクトリ内のWAV削除
9. 新規録音 or アプリ終了

---

## 6. 機能要件

### Must（PoC）
- アプリ内録音（マイク権限チェック含む）
- 録音データをtempディレクトリに保存
- 単音メロディの音高検出
- WAV → MIDI変換（1トラック）
- MIDIファイル保存（ユーザー指定）
- 録音や変換エラー時のUI表示

### Nice to have（将来）
- 録音波形の表示
- 変換精度の設定（閾値調整）
- 録音後の再生プレビュー
- ドラッグ＆ドロップでDAWに直接インポート

---

## 7. 非機能要件
- クロスプラットフォーム対応（Windows / macOS）
- 開発ツール：Electron + React
- 音声処理ライブラリ：`pitchfinder` / `tonejs/midi`（PoC時点）
- ビルド管理：`electron-builder`（将来の署名対応を想定）
- 一時ファイルは`app.getPath('temp')`配下に保存

---

## 8. KPI（PoC段階）
- MIDI変換の音高精度：80%以上
- 単音メロディ変換成功率：90%以上
- 録音〜MIDI保存までの操作ステップ：5ステップ以内

---

## 9. 完了定義（DoD）
- Windows / macOSの両方でPoCが動作する
- 録音 → MIDI変換 → 保存の一連の流れがエラーなく実行可能
- 簡易的なUIでユーザーが操作できる
- tempディレクトリ使用のファイル運用が実装されている
